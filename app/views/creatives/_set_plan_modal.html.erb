<div id="set-plan-modal" style="display:none;position:fixed;top:0;left:0;width:100vw;height:100vh;z-index:1000;align-items:center;justify-content:center;">
  <div style="background: var(--color-bg);padding:2em;border-radius:8px;min-width:320px;max-width:90vw;position:relative;">
    <button id="close-set-plan-modal" style="position:absolute;top:0.5em;right:0.5em;">&times;</button>
    <h2><%= t('creatives.index.set_plan_title', default: 'Set Plan for Selected Creatives') %></h2>
    <form id="set-plan-form" method="post" action="<%= set_plan_creatives_path %>">
      <%= csrf_meta_tags %>
      <div style="margin-bottom:1em;">
        <label for="plan-id-select"><%= t('creatives.index.select_plan', default: 'Select Plan') %></label>
        <select id="plan-id-select" name="plan_id" required style="width:100%;">
          <% Label.where(type: 'Plan').each do |plan| %>
            <option value="<%= plan.id %>"><%= plan.name.presence || plan.target_date %></option>
          <% end %>
        </select>
      </div>
      <!-- Hidden field for creative IDs, filled by JS -->
      <input type="hidden" name="creative_ids" id="selected-creative-ids-input" />
      <div style="display:flex; gap:1em; align-items:center;">
        <button type="button" id="remove-plan-btn" data-remove-path="<%= remove_plan_creatives_path %>" class="btn btn-danger" style="margin-right:0.5em;">
          <%= t('creatives.index.remove_plan', default: 'Remove Plan') %>
        </button>
        <button type="submit" class="btn btn-primary"><%= t('creatives.index.add_plan', default: 'Add Plan') %></button>
      </div>
    </form>
  </div>
</div>

<%= javascript_include_tag 'set_plan_modal' %>
